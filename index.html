
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      
        <link rel="next" href="security/">
      
      
      <link rel="icon" href="media/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.50">
    
    
      
        <title>Contoso Sales AI Assistant</title>
      
    
    
      <link rel="stylesheet" href="assets/stylesheets/main.a40c8224.min.css">
      
        
        <link rel="stylesheet" href="assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="css/custom.css">
    
    <script>__md_scope=new URL(".",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
   <link href="assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
    html.glightbox-open { overflow: initial; height: 100%; }
    .gslide-title { margin-top: 0px; user-select: text; }
    .gslide-desc { color: #666; user-select: text; }
    .gslide-image img { background: white; }
    .gscrollbar-fixer { padding-right: 15px; }
    .gdesc-inner { font-size: 0.75rem; }
    body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
    body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
    body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}</style> <script src="assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="pink">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="." title="Contoso Sales AI Assistant" class="md-header__button md-logo" aria-label="Contoso Sales AI Assistant" data-md-component="logo">
      
  <img src="media/favicon.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Contoso Sales AI Assistant
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Introduction
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="black" data-md-color-accent="pink"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 2c-1.82 0-3.53.5-5 1.35C8 5.08 10 8.3 10 12s-2 6.92-5 8.65C6.47 21.5 8.18 22 10 22a10 10 0 0 0 10-10A10 10 0 0 0 10 2"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="amber" data-md-color-accent="cyan"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="." title="Contoso Sales AI Assistant" class="md-nav__button md-logo" aria-label="Contoso Sales AI Assistant" data-md-component="logo">
      
  <img src="media/favicon.png" alt="logo">

    </a>
    Contoso Sales AI Assistant
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
      <a href="." class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="security/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Security
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="resources/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Resources
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="conversation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Conversation
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="development/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Development
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="deployment/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Deployment
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="summary/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Summary
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="contoso-sales-assistant">Contoso Sales Assistant<a class="headerlink" href="#contoso-sales-assistant" title="Permanent link">&para;</a></h1>
<h2 id="introduction-to-the-contoso-sales-assistant">Introduction to the Contoso Sales Assistant<a class="headerlink" href="#introduction-to-the-contoso-sales-assistant" title="Permanent link">&para;</a></h2>
<p>You are a sales manager at Contoso, a multinational retail company that sells outdoor equipment. You need to analyze sales data to find trends, understand customer preferences, and make informed business decisions. To help you, Contoso has developed a conversational assistant that can answer questions about your sales data.</p>
<p><a class="glightbox" href="media/persona.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="Contoso Sales Assistant" src="media/persona.png" /></a></p>
<h2 id="solution-overview">Solution Overview<a class="headerlink" href="#solution-overview" title="Permanent link">&para;</a></h2>
<p>The Contoso Sales Assistant is a conversational agent that can answer questions about sales data, generate charts, and create Excel files for further analysis.</p>
<p>The app is built with <a href="https://learn.microsoft.com/azure/ai-services/openai/concepts/models" target="_blank">Azure OpenAI GPT-4o</a> , the <a href="https://learn.microsoft.com/azure/ai-services/openai/concepts/assistants" target="_blank">Azure OpenAI Assistants API</a>  and the <a href="https://docs.chainlit.io/" target="_blank">Chainlit</a>  Conversational AI  web framework.</p>
<p>The app uses a read-only SQLite Contoso Sales Database with 40,000 rows of synthetic data. When the app starts, it reads the sales database schema, product categories, product types, and reporting years, then adds this info to the Azure OpenAI Assistants API instruction context.</p>
<p>The Contoso Sales Assistant app is deployed to Azure using Azure Container Apps. The app is fully asynchronous, uses the FastAPI framework, and streams all responses to users in real-time.</p>
<p><a class="glightbox" href="media/Architecture.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="high level view of the app architecture" src="media/Architecture.png" /></a></p>
<!-- The Contoso Sales Assistant integrates Azure OpenAI Assistants API with Chainlit to deliver a streamlined conversational experience. The Azure OpenAI Assistants API manages conversation flow, orchestrates tools, and generates responses, while Chainlit provides the conversational web interface for users. The LLM generates SQL queries, Python code, and other responses based on user input, and the app uses the Azure OpenAI Assistants API to execute these tasks. -->

<h2 id="azure-openai-assistants-api-as-an-orchestrator">Azure OpenAI Assistants API as an Orchestrator<a class="headerlink" href="#azure-openai-assistants-api-as-an-orchestrator" title="Permanent link">&para;</a></h2>
<p>The OpenAI Assistants API acts as an orchestrator, managing multiple tools and functions based on user input. Using parameters like tool_choice, it directs tasks to the right tools seamlessly within a single request, maintaining context across workflows. This orchestration reduces backend complexity, allowing developers to focus on core functionality while the API dynamically handles multi-tool automation, making it ideal for sophisticated applications.</p>
<h2 id="why-use-the-azure-openai-assistants-api">Why use the Azure OpenAI Assistants API?<a class="headerlink" href="#why-use-the-azure-openai-assistants-api" title="Permanent link">&para;</a></h2>
<p>The Azure OpenAI Assistants API makes it easier to build Generative AI apps by simplifying key tasks:</p>
<ol>
<li><strong>Stateful</strong>: builtin conversation state management.</li>
<li><strong>Reduced development effort</strong>: Abstracts the complexities of integrating AI allowing developers to focus on building features rather than managing the AI model interaction.</li>
<li><strong>Context Management</strong>: The API automatically handles conversation context, ensuring the AI provides relevant, coherent responses throughout interactions.</li>
<li><strong>Powerful native tools and 3rd Party extensibility</strong>: Access up to 128 tools in parallel including functions, code interpreter, and file search.</li>
<li><strong>Scalability</strong>: It scales effortlessly, managing workloads and resources automatically to handle both small and large user bases.</li>
<li><strong>Context Execution</strong>: The API lets you define and run context against an LLM, making it easier to perform tasks like data queries or code generation based on specific instructions.</li>
</ol>
<p>The following table compares the Azure OpenAI Assistants API with the Chat Completions API.</p>
<table>
<thead>
<tr>
<th>Chat Completions API</th>
<th>Assistants API</th>
</tr>
</thead>
<tbody>
<tr>
<td>Stateless</td>
<td>Stateful with persistant threads</td>
</tr>
<tr>
<td>Lightweight and powerful</td>
<td>Automatic context management</td>
</tr>
<tr>
<td>Action Tools<br>- Function calling</td>
<td>Multiple tools in parallel</td>
</tr>
<tr>
<td></td>
<td>Action Tools<br>- Code Interpreter<br>- Function calling</td>
</tr>
<tr>
<td></td>
<td>Knowledge tools<br>- File Search in multiple formats</td>
</tr>
</tbody>
</table>
<h2 id="assistants-components">Assistants components<a class="headerlink" href="#assistants-components" title="Permanent link">&para;</a></h2>
<p>For more information on the components of the Azure OpenAI Assistants API, see the <a href="https://learn.microsoft.com/azure/ai-services/openai/concepts/assistants" target="_blank">Azure OpenAI Assistants API documentation</a>.</p>
<p><a class="glightbox" href="media/assistants-overview.png" data-type="image" data-width="auto" data-height="auto" data-desc-position="bottom"><img alt="" src="media/assistants-overview.png" /></a></p>
<table>
<thead>
<tr>
<th>Component</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>Assistant</strong></td>
<td>Custom AI that uses Azure OpenAI models in conjunction with tools.</td>
</tr>
<tr>
<td><strong>Thread</strong></td>
<td>A conversation session between an Assistant and a user. Threads store Messages and automatically handle truncation to fit content into a model's context.</td>
</tr>
<tr>
<td><strong>Message</strong></td>
<td>A message created by an Assistant or a user. Messages can include text, images, and other files. Messages are stored as a list on the Thread.</td>
</tr>
<tr>
<td><strong>Run</strong></td>
<td>Activation of an Assistant to begin running based on the contents of the Thread. The Assistant uses its configuration and the Thread’s Messages to perform tasks by calling models and tools. As part of a Run, the Assistant appends Messages to the Thread.</td>
</tr>
<tr>
<td><strong>Run Step</strong></td>
<td>A detailed list of steps the Assistant took as part of a Run. An Assistant can call tools or create Messages during its run. Examining Run Steps allows you to understand how the Assistant is getting to its final results.</td>
</tr>
</tbody>
</table>
<h3 id="openai-tools">OpenAI Tools<a class="headerlink" href="#openai-tools" title="Permanent link">&para;</a></h3>
<p>The app uses the following Azure OpenAI tools:</p>
<ol>
<li><strong><a href="https://learn.microsoft.com/azure/ai-services/openai/how-to/function-calling" target="_blank">Function Calling</a></strong>: To execute LLM generated SQL queries against the read-only SQLite database.</li>
<li><strong><a href="https://learn.microsoft.com/azure/ai-services/openai/how-to/code-interpreter?tabs=python" target="_blank">Code Interpreter</a></strong>: To run Python code to create visualizations like pie charts and bar charts, and generate Excel files for users to download for deeper analysis.</li>
<li><strong><a href="https://learn.microsoft.com/azure/ai-services/openai/how-to/file-search?tabs=python" target="_blank">File Search</a></strong>: To extend the assistant's knowledge with user loaded Contoso product datasheets.</li>
</ol>
<h3 id="best-practices">Best Practices<a class="headerlink" href="#best-practices" title="Permanent link">&para;</a></h3>
<p>The app demonstrates best practices for creating a conversational agent with the Azure OpenAI Assistants API. The app is fully asynchronous, uses the FastAPI framework, and streams all responses to users in real-time.</p>
<h3 id="extending">Extending<a class="headerlink" href="#extending" title="Permanent link">&para;</a></h3>
<p>This solution can be easily adapted to support other scenarios, such as customer support, simply by changing the database and adjusting the Azure OpenAI Assistants API instructions to fit the new use case.</p>
<h2 id="the-contoso-sales-assistant-source-code">The Contoso Sales Assistant Source Code<a class="headerlink" href="#the-contoso-sales-assistant-source-code" title="Permanent link">&para;</a></h2>
<p>The source code is available in the <a href="https://github.com/Azure-Samples/contoso-sales-azure-openai-assistants-api" target="_blank">Contoso Sales Assistant built with the Azure OpenAI Assistant API and Chainlit</a>  repository.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
        
          
          <a href="security/" class="md-footer__link md-footer__link--next" aria-label="Next: Security">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Security
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": ".", "features": ["navigation.instant", "navigation.footer", "content.code.copy"], "search": "assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="assets/javascripts/bundle.60a45f97.min.js"></script>
      
    
  <script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});
document$.subscribe(() => { lightbox.reload() });
</script></body>
</html>